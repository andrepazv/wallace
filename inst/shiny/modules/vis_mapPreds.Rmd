```{asis, echo = {{vis_mapPreds_knit & vis_map_bioclim_knit & !vis_map_threshold_knit}}, eval = {{vis_mapPreds_knit & vis_map_bioclim_knit  & !vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_bioclim_knit & !vis_map_threshold_knit}}}
### Visualize
Generate a map of the Bioclim generated model with no threshold
```

```{r, echo = {{vis_mapPreds_knit & vis_map_bioclim_knit  & !vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_bioclim_knit  & !vis_map_threshold_knit}}}
# Select current model and obtain raster prediction
predSel <- dismo::predict(m, bgMask())
m_{{spAbr}} <- model_{{spAbr}}@models[["{{curModel_rmd}}"]]
predSel_{{spAbr}} <- dismo::predict(m, bgMask_{{spAbr}})
#Get values of prediction
mapPredVals_{{spAbr}} <- getRasterVals(predSel_{{Abr}}, {{predType_rmd}})
#Define colors and legend  
rasCols <- c("#2c7bb6", "#abd9e9", "#ffffbf", "#fdae61", "#d7191c")
legendPal <- colorNumeric(rev(rasCols), mapPredVals, na.color = 'transparent')
rasPal <- colorNumeric(rasCols, mapPredVals, na.color = 'transparent')
#Generate map
map %>% clearAll() %>%
      addLegend("bottomright", pal = legendPal,
                title = "Predicted Suitability<br>(Training)",
                values = mapPredVals, layerId = "train",
                labFormat = reverseLabels(2, reverse_order = TRUE))

  map %>%
    map_occs(occs_{{spAbr}}) %>%
    addRasterImage( predSel_{{spAbr}}, colors = rasPal, opacity = 0.7,
                   group = 'vis', layerId = 'mapPred', method = "ngb") %>%
    # add background polygon(s)
   mapBgPolys(bgExt_{{spAbr}})

```

```{asis, echo = {{vis_mapPreds_knit & vis_map_maxent_knit & !vis_map_threshold_knit}}, eval = {{vis_mapPreds_knit & vis_map_maxent_knit  & !vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxent_knit & !vis_map_threshold_knit}}}
### Visualize
Generate a map of the Maxent generated model with no threshold
```

```{r, echo = {{vis_mapPreds_knit & vis_map_maxent_knit  & !vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxent_knit & !vis_map_threshold_knit}}}
# Select current model and obtain raster prediction
m_{{spAbr}} <- model_{{spAbr}}@models[["{{curModel_rmd}}"]]
predSel_{{spAbr}} <- ENMeval::enm.maxent.jar@pred(
  m, bgMask_{{spAbr}},
 other.settings = list(
pred.type = {{predType_rmd}},
clamp = {{clamp_rmd}}))
#Get values of prediction
mapPredVals_{{spAbr}} <- getRasterVals(predSel_{{Abr}}, {{predType_rmd}})
#Define colors and legend  
rasCols <- c("#2c7bb6", "#abd9e9", "#ffffbf", "#fdae61", "#d7191c")
legendPal <- colorNumeric(rev(rasCols), mapPredVals, na.color = 'transparent')
rasPal <- colorNumeric(rasCols, mapPredVals, na.color = 'transparent')
#Generate map
map %>% clearAll() %>%
      addLegend("bottomright", pal = legendPal,
                title = "Predicted Suitability<br>(Training)",
                values = mapPredVals, layerId = "train",
                labFormat = reverseLabels(2, reverse_order = TRUE))

  map %>%
    map_occs(occs_{{spAbr}}) %>%
    addRasterImage( predSel_{{spAbr}}, colors = rasPal, opacity = 0.7,
                   group = 'vis', layerId = 'mapPred', method = "ngb") %>%
    # add background polygon(s)
   mapBgPolys(bgExt_{{spAbr}})

```

```{asis, echo = {{vis_mapPreds_knit & vis_map_maxent_knit & vis_map_threshold_knit}}, eval = {{vis_mapPreds_knit & vis_map_maxent_knit  & vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxent_knit & vis_map_threshold_knit}}}
### Visualize
Generate a map of the Maxent generated model with a "{{thresholdRule_rmd}}" threshold rule of {{threshold_rmd}}.
```

```{r, echo = {{vis_mapPreds_knit & vis_map_maxent_knit & vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxent_knit & vis_map_threshold_knit}}}
# Select current model and obtain raster prediction
m_{{spAbr}} <- model_{{spAbr}}@models[["{{curModel_rmd}}"]]
predSel_{{spAbr}} <- ENMeval::enm.maxent.jar@pred(
  m, bgMask_{{spAbr}},
 other.settings = list(
pred.type = {{predType_rmd}},
clamp = {{clamp_rmd}}))
# Applied selected threshold
predSel_{{spAbr}} <- predSel_{{spAbr}} > {{threshold_rmd}}
#Get values of prediction
mapPredVals_{{spAbr}} <- getRasterVals(predSel_{{spAbr}}, {{predType_rmd}})
#Define colors and legend  
rasCols <- c("#2c7bb6", "#abd9e9", "#ffffbf", "#fdae61", "#d7191c")
legendPal <- colorNumeric(rev(rasCols), mapPredVals, na.color = 'transparent')
    rasPal <- c('gray', 'blue')
# Generate map  
      map %>% clearAll() %>%
      addLegend("bottomright", colors = c('gray', 'blue'),
                title = "Thresholded Suitability<br>(Training)",
                labels = c("predicted absence", "predicted presence"),
                opacity = 1, layerId = "train")

  map %>%
    map_occs(occs_{{spAbr}}) %>%
    addRasterImage( predSel_{{spAbr}}, colors = rasPal, opacity = 0.7,
                   group = 'vis', layerId = 'mapPred', method = "ngb") %>%
    # add background polygon(s)
   mapBgPolys(bgExt_{{spAbr}})
  


```

```{asis, echo = {{vis_mapPreds_knit & vis_map_maxnet_knit & !vis_map_threshold_knit}}, eval = {{vis_mapPreds_knit & vis_map_maxnet_knit & !vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxnet_knit & !vis_map_threshold_knit}}}
### Visualize
Generate a map of the maxnet generated model with no threshold
```

```{r, echo = {{vis_mapPreds_knit & !vis_map_maxnet_knit & !vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & !vis_map_maxnet_knit & !vis_map_threshold_knit}}}
# Select current model and obtain raster prediction
m_{{spAbr}} <- model_{{spAbr}}@models[["{{curModel_rmd}}"]]
predSel_{{spAbr}} <-  ENMeval::enm.maxnet@pred(
  m, bgMask_{{spAbr}},
other.settings = list(
pred.type = {{predType_rmd}},
clamp = {{clamp_rmd}}))
#Get values of prediction
mapPredVals_{{spAbr}} <- getRasterVals(predSel_{{Abr}}, {{predType_rmd}})
#Define colors and legend  
rasCols <- c("#2c7bb6", "#abd9e9", "#ffffbf", "#fdae61", "#d7191c")
legendPal <- colorNumeric(rev(rasCols), mapPredVals, na.color = 'transparent')
rasPal <- colorNumeric(rasCols, mapPredVals, na.color = 'transparent')
#Generate map
map %>% clearAll() %>%
      addLegend("bottomright", pal = legendPal,
                title = "Predicted Suitability<br>(Training)",
                values = mapPredVals, layerId = "train",
                labFormat = reverseLabels(2, reverse_order = TRUE))

  map %>%
    map_occs(occs_{{spAbr}}) %>%
    addRasterImage( predSel_{{spAbr}}, colors = rasPal, opacity = 0.7,
                   group = 'vis', layerId = 'mapPred', method = "ngb") %>%
    # add background polygon(s)
   mapBgPolys(bgExt_{{spAbr}})

```

```{asis, echo = {{vis_mapPreds_knit & vis_map_maxnet_knit & vis_map_threshold_knit}}, eval = {{vis_mapPreds_knit & vis_map_maxnet_knit & vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxnet_knit & vis_map_threshold_knit}}}
### Visualize
Generate a map of the maxnet generated model with with a "{{thresholdRule_rmd}}" threshold rule of {{threshold_rmd}}.
```

```{r, echo = {{vis_mapPreds_knit & vis_map_maxnet_knit & vis_map_threshold_knit}}, include = {{vis_mapPreds_knit & vis_map_maxnet_knit & vis_map_threshold_knit}}}
# Select current model and obtain raster prediction
m_{{spAbr}} <- model_{{spAbr}}@models[["{{curModel_rmd}}"]] 
predSel_{{spAbr}} <-  ENMeval::enm.maxnet@pred(
  m, bgMask_{{spAbr}},
other.settings = list(
pred.type = {{predType_rmd}},
clamp = {{clamp_rmd}}))
# Applied selected threshold
predSel_{{spAbr}} <- predSel_{{spAbr}} > {{threshold_rmd}}
#Get values of prediction
mapPredVals_{{spAbr}} <- getRasterVals(predSel_{{Abr}}, {{predType_rmd}})
#Define colors and legend  
rasCols <- c("#2c7bb6", "#abd9e9", "#ffffbf", "#fdae61", "#d7191c")
legendPal <- colorNumeric(rev(rasCols), mapPredVals, na.color = 'transparent')
    rasPal <- c('gray', 'blue')
# Generate map
    map %>% clearAll() %>%
      addLegend("bottomright", colors = c('gray', 'blue'),
                title = "Thresholded Suitability<br>(Training)",
                labels = c("predicted absence", "predicted presence"),
                opacity = 1, layerId = "train")

  map %>%
    map_occs(occs_{{spAbr}}) %>%
    addRasterImage( predSel_{{spAbr}}, colors = rasPal, opacity = 0.7,
                   group = 'vis', layerId = 'mapPred', method = "ngb") %>%
    # add background polygon(s)
   mapBgPolys(bgExt_{{spAbr}})

```
